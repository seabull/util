#!/bin/sh
#------------------------------------------------------------------------------
  ps -eaf \
	|& awk '{ printf "%s %s\n", $1, $6 }' \
	|& sort -u \
	|& awk ' BEGIN { user = "." ; cnt = 0 ; } \
		$1 == "UID" { next ; } \
		length($1) <= 0 { next ; } \
		{ \
			if ( user != $1 ) { \
				if ( user != "." ) { \
					printf "%-20s %d\n", user, cnt ; \
				} \
				user = $1 ; \
				cnt = 1 ; \
		  	} else { \
				cnt ++ ; \
			} \
		} \
		END { \
				if ( user != "." ) { \
					printf "%-20s %d\n", user, cnt ; \
				} \
		}'

#------------------------------------------------------------------------------
